syntax = "proto3";

import "types.proto";

package flashback;

// entry page requests
message SignInRequest { User user = 1; }
message SignInResponse { bool success = 1; string details = 2; User user = 3; }
message SignUpRequest { User user = 1; }
message SignUpResponse { bool success = 1; string details = 2; User user = 3; }
message VerifySessionRequest { User user = 1; }
message VerifySessionResponse { bool valid = 1; }

// account page requests
message ResetPasswordRequest { User user = 1; }
message ResetPasswordResponse { bool success = 1; string details = 2; User user = 3; }
message RenameUserRequest { User user = 1; }
message RenameUserResponse { }
message ChangeUserEmailRequest { User user = 1; }
message ChangeUserEmailResponse { }
message VerifyUserRequest { User user = 1; }
message VerifyUserResponse { }

// welcome page requests
message CreateRoadmapRequest { User user = 1; string name = 2; }
message CreateRoadmapResponse { Roadmap roadmap = 1; }
message GetRoadmapsRequest { User user = 1; }
message GetRoadmapsResponse { repeated Roadmap roadmap = 1; }
message RenameRoadmapRequest { User user = 1; Roadmap roadmap = 2; }
message RenameRoadmapResponse { }
message RemoveRoadmapRequest { User user = 1; Roadmap roadmap = 2; }
message RemoveRoadmapResponse { }
message SearchRoadmapsRequest { User user = 1; string token = 2; }
message SearchRoadmapsResponse { repeated Roadmap roadmap = 1; }
message CloneRoadmapRequest { User user = 1; Roadmap roadmap = 2; }
message CloneRoadmapResponse { Roadmap roadmap = 1; bool success = 2; string details = 3; uint32 code = 4; }

// roadmap page requests
message GetMilestonesRequest { User user = 1; uint64 roadmap_id = 2; }
message GetMilestonesResponse { repeated Milestone milestones = 1; bool success = 2; string details = 3; uint32 code = 4; }
message AddMilestoneRequest { User user = 1; uint64 subject_id = 2; expertise_level subject_level = 3; uint64 roadmap_id = 4; uint64 position = 5; }
message AddMilestoneResponse { Milestone milestone = 1; bool success = 2; string details = 3; uint32 code = 4; }
message AddRequirementRequest { User user = 1; Roadmap roadmap = 2; Milestone milestone = 3; Milestone required_milestone = 4; }
message AddRequirementResponse { bool success = 1; string details = 2; uint32 code = 3; }
message GetRequirementsRequest { User user = 1; Roadmap roadmap = 2; Milestone milestone = 3; }
message GetRequirementsResponse { repeated Milestone milestones = 1; bool success = 2; string details = 3; uint32 code = 4; }
message SearchSubjectsRequest { User user = 1; string token = 2; }
message SearchSubjectsResponse { repeated MatchingSubject subjects = 1; }
message CreateSubjectRequest { User user = 1; string name = 2; }
message CreateSubjectResponse { bool success = 1; string details = 2; uint32 code = 3; }
message ReorderMilestoneRequest { User user = 1; Roadmap roadmap = 2; uint64 current_position = 3; uint64 target_position = 4; }
message ReorderMilestoneResponse { bool success = 1; string details = 2; uint32 code = 3; }
message RemoveMilestoneRequest { User user = 1; Roadmap roadmap = 2; Milestone milestone = 3; }
message RemoveMilestoneResponse { bool success = 1; string details = 2; uint32 code = 3; }
message ChangeMilestoneLevelRequest { User user = 1; Roadmap roadmap = 2; Milestone milestone = 3; }
message ChangeMilestoneLevelResponse { bool success = 1; string details = 2; uint32 code = 3; }

// subject page
message RenameSubjectRequest { User user = 1; uint64 id = 2; string name = 3; } // X
message RenameSubjectResponse { bool success = 1; string details = 2; uint32 code = 3; }
message RemoveSubjectRequest { User user = 1; Subject subject = 2; }
message RemoveSubjectResponse { bool success = 1; string details = 2; uint32 code = 3; }
message MergeSubjectsRequest { User user = 1; Subject source_subject = 2; Subject target_subject = 3; }
message MergeSubjectsResponse { bool success = 1; string details = 2; uint32 code = 3; }

// subject page resource view
message GetResourcesRequest { User user = 1; }
message GetResourcesResponse { }
message AddResourceToSubjectRequest { User user = 1; }
message AddResourceToSubjectResponse { }
message CreateResourceRequest { User user = 1; }
message CreateResourceResponse { }
message DropResourceFromSubjectRequest { User user = 1; }
message DropResourceFromSubjectResponse { }
message MergeResourcesRequest { User user = 1; }
message MergeResourcesResponse { }

// subject page topic view
message CreateTopicRequest { User user = 1; }
message CreateTopicResponse { }
message GetTopicsRequest { User user = 1; }
message GetTopicsResponse { }
message ReorderTopicRequest { User user = 1; }
message ReorderTopicResponse { }
message RemoveTopicRequest { User user = 1; }
message RemoveTopicResponse { }
message MergeTopicsRequest { User user = 1; }
message MergeTopicsResponse { }
message MoveTopicRequest { User user = 1; }
message MoveTopicResponse { }
message SearchTopicsRequest { User user = 1; }
message SearchTopicsResponse { }
message ChangeTopicLevelRequest { User user = 1; }
message ChangeTopicLevelResponse { }

// resource page requests
message GetSectionsRequest { User user = 1; }
message GetSectionsResponse { }
message RenameResourceRequest { User user = 1; }
message RenameResourceResponse { }
message RemoveResourceRequest { User user = 1; }
message RemoveResourceResponse { }
message EditResourceProviderRequest { User user = 1; }
message EditResourceProviderResponse { }
message EditResourcePresenterRequest { User user = 1; }
message EditResourcePresenterResponse { }
message EditResourceLinkRequest { User user = 1; }
message EditResourceLinkResponse { }
message EditResourceProductionRequest { User user = 1; }
message EditResourceProductionResponse { }
message EditResourceExpirationRequest { User user = 1; }
message EditResourceExpirationResponse { }
message ChangeResourceTypeRequest { User user = 1; }
message ChangeResourceTypeResponse { }
message EditSectionPatternRequest { User user = 1; }
message EditSectionPatternResponse { }
message CreateSectionRequest { User user = 1; }
message CreateSectionResponse { }
message ReorderSectionRequest { User user = 1; }
message ReorderSectionResponse { }
message RemoveSectionRequest { User user = 1; }
message RemoveSectionResponse { }
message MergeSectionsRequest { User user = 1; }
message MergeSectionsResponse { }
message MoveSectionRequest { User user = 1; }
message MoveSectionResponse { }

// providers
message CreateProviderRequest { User user = 1; }
message CreateProviderResponse { }
message SearchProvidersRequest { User user = 1; }
message SearchProvidersResponse { }
message AddProviderRequest { User user = 1; }
message AddProviderResponse { }
message RenameProviderRequest { User user = 1; }
message RenameProviderResponse { }
message RemoveProviderRequest { User user = 1; }
message RemoveProviderResponse { }
message MergeProvidersRequest { User user = 1; }
message MergeProvidersResponse { }

// presenters
message CreatePresenterRequest { User user = 1; }
message CreatePresenterResponse { }
message SearchPresentersRequest { User user = 1; }
message SearchPresentersResponse { }
message AddPresenterRequest { User user = 1; }
message AddPresenterResponse { }
message RenamePresenterRequest { User user = 1; }
message RenamePresenterResponse { }
message RemovePresenterRequest { User user = 1; }
message RemovePresenterResponse { }
message MergePresentersRequest { User user = 1; }
message MergePresentersResponse { }

// section/topic page
message CreateCardRequest { User user = 1; }
message CreateCardResponse { }
message ReorderCardRequest { User user = 1; }
message ReorderCardResponse { }
message RemoveCardRequest { User user = 1; }
message RemoveCardResponse { }
message MergeCardsRequest { User user = 1; }
message MergeCardsResponse { }

// section page
message GetStudyCardsRequest { User user = 1; }
message GetStudyCardsResponse { }
message RenameSectionRequest { User user = 1; }
message RenameSectionResponse { }
message MoveCardToSectionRequest { User user = 1; Resource resource = 2; Section section = 3; }
message MoveCardToSectionResponse { }

// topic page
message GetPracticeCardsRequest { User user = 1; }
message GetPracticeCardsResponse { }
message RenameTopicRequest { User user = 1; }
message RenameTopicResponse { }
message MoveCardToTopicRequest { User user = 1; Subject subject = 2; Topic topic = 3; } // X
message MoveCardToTopicResponse { }

// card page
message EditHeadlineRequest { User user = 1; }
message EditHeadlineResponse { }
message CreateBlockRequest { User user = 1; }
message CreateBlockResponse { }
message GetBlocksRequest { User user = 1; }
message GetBlocksResponse { }
message EditBlockRequest { User user = 1; Block block = 2; } // X
message EditBlockResponse { bool success = 1; string details = 2; }
message RemoveBlockRequest { User user = 1; }
message RemoveBlockResponse { }
message ReorderBlockRequest { User user = 1; }
message ReorderBlockResponse { }
message MergeBlocksRequest { User user = 1; }
message MergeBlocksResponse { }
message SplitBlockRequest { User user = 1; }
message SplitBlockResponse { }
message MoveBlockRequest { User user = 1; }
message MoveBlockResponse { }

// assessments
message CreateAssessmentRequest { User user = 1; Card card = 2; }
message CreateAssessmentResponse { }
message GetAssessmentRequest { User user = 1; }
message GetAssessmentResponse { }
message ExpandAssessmentRequest { User user = 1; }
message ExpandAssessmentResponse { }

// nerves
message CreateNerveRequest { User user = 1; }
message CreateNerveResponse { }

// practice reports
message EstimateCardTimeRequest { User user = 1; }
message EstimateCardTimeResponse { }
message GetTopicWeightRequest { User user = 1; }
message GetTopicWeightResponse { }
message GetSubjectWeightRequest { User user = 1; }
message GetSubjectWeightResponse { }
message GetRoadmapWeightRequest { User user = 1; }
message GetRoadmapWeightResponse { }
