syntax = "proto3";

package flashback;

import "google/protobuf/timestamp.proto";

enum expertise_level { surface = 0; depth = 1; origin = 2; }

message Roadmap { uint64 id = 1; string name = 2; }
message Subject { uint64 id = 1; string name = 2; }
message MatchingSubject { uint64 position = 1; Subject subject = 2; }
message Milestone { uint64 position = 1; uint64 id = 2; string name = 3; expertise_level level = 4; }
message Presenter { uint64 id = 1; string name = 2; }
message Provider { uint64 id = 1; string name = 2; }
message Topic { uint64 position = 1; string name = 2; expertise_level level = 3; }
message Section { uint64 position = 1; closure_state state = 2; string name = 3; string link =4; }

message Resource {
    enum resource_type {
        book = 0;
        website = 1;
        course = 2;
        video = 3;
        channel = 4;
        mailing_list = 5;
        manual = 6;
        slides = 7;
        nerve = 8;
    }

    enum section_pattern {
        chapter = 0;
        page = 1;
        session = 2;
        episode = 3;
        playlist = 4;
        post = 5;
        synapse = 6;
    }

    uint64 id = 1;
    resource_type type = 2;
    section_pattern pattern = 3;
    string name = 4;
    string link = 5;
    uint64 production = 6;
    uint64 expiration = 7;
    Provider provider = 8;
    repeated Presenter presenters = 9;
}

message Card {
    enum card_state {
        draft = 0;
        reviewed = 1;
        completed = 2;
        approved = 3;
        released = 4;
        rejected = 5;
    }

    uint64 id = 1;
    card_state state = 2;
    string headline = 3;
}

message Block {
    enum content_type {
        text = 0;
        code = 1;
        image = 2;
    }

    uint64 position = 1;
    content_type type = 2;
    string extension = 3;
    string metadata = 4;
    string content = 5;
}

message User {
    enum State {
        active = 0;
        inactive = 1;
        suspended = 2;
        banned = 3;
    }

    uint64 id = 1;
    string name = 2;
    string email = 3;
    State state = 4;
    bool verified = 5;
    string password = 6;
    string token = 7;
    google.protobuf.Timestamp joined = 8;
    string device = 9;
    string hash = 10;
}

enum practice_mode {
    aggressive = 0;
    progressive = 1;
    selective = 2;
}

enum closure_state {
    draft = 0;
    reviewed = 1;
    completed = 2;
}

message Weight {
    Resource resource = 1;
    uint64 percentage = 2;
}