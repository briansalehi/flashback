<VirtualHost *:80>
    ServerName api.flashback.eu.com
    
    # Proxy configuration for gRPC-Web
    ProxyPreserveHost On
    ProxyRequests Off
    
    # Required headers for gRPC-Web
    RequestHeader set X-Forwarded-Proto "http"
    RequestHeader set X-Forwarded-Port "80"
    
    # Allow CORS headers to pass through
    #Header always set Access-Control-Allow-Origin "http://flashback.eu.com"
    #Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    #Header always set Access-Control-Allow-Headers "Content-Type, X-Grpc-Web, X-User-Agent, grpc-timeout"
    #Header always set Access-Control-Expose-Headers "grpc-status, grpc-message"
    
    # Handle OPTIONS preflight requests
    #RewriteEngine On
    #RewriteCond %{REQUEST_METHOD} OPTIONS
    #RewriteRule ^(.*)$ $1 [R=200,L]
    
    # Proxy all requests to Envoy
    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/
    
    # Increase timeout for long-running requests
    ProxyTimeout 300
</VirtualHost>
